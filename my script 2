-- BIGNICKOZZZ FULL SCRIPT
-- Services
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local TweenService = game:GetService("TweenService")

local lp = Players.LocalPlayer
local mouse = lp:GetMouse()
local chr = lp.Character or lp.CharacterAdded:Wait()
local hum = chr:WaitForChild("Humanoid")

-- Flags
local skyEnabled = false
local aimbotEnabled = false
local isRunning = true
local lockedTarget = nil
local currentTab = "Main"
local aimbotDistance = 30
local mouseStillThreshold = 0.1
local mouseStationaryTime = 0

-- ScreenGui Setup
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "BIGNICKOZZZ_GUI"
screenGui.ResetOnSpawn = false
screenGui.Enabled = true
screenGui.Parent = lp:WaitForChild("PlayerGui")

-- UI Components
local function createUICorner(parent)
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 8)
    corner.Parent = parent
end

local function createTabButton(text, position)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0, 80, 0, 30)
    btn.Position = position
    btn.Text = text
    btn.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 14
    createUICorner(btn)
    return btn
end

local function createSlider(labelText, min, max, default, callback)
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, -20, 0, 60)
    frame.BackgroundTransparency = 1

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 0, 20)
    label.Text = labelText
    label.TextColor3 = Color3.new(1, 1, 1)
    label.BackgroundTransparency = 1
    label.Font = Enum.Font.Gotham
    label.TextSize = 14
    label.Parent = frame

    local slider = Instance.new("TextBox")
    slider.Size = UDim2.new(1, 0, 0, 30)
    slider.Position = UDim2.new(0, 0, 0, 25)
    slider.Text = tostring(default)
    slider.TextColor3 = Color3.new(1, 1, 1)
    slider.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    slider.Font = Enum.Font.Gotham
    slider.TextSize = 14
    createUICorner(slider)
    slider.Parent = frame

    slider.FocusLost:Connect(function()
        local val = tonumber(slider.Text)
        if val then
            val = math.clamp(val, min, max)
            slider.Text = tostring(val)
            callback(val)
        else
            slider.Text = tostring(default)
        end
    end)

    return frame
end

-- Main UI Frame
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 300, 0, 300)
mainFrame.Position = UDim2.new(0.5, -150, 0.5, -150)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
mainFrame.Active = true
mainFrame.Draggable = true
createUICorner(mainFrame)
mainFrame.Parent = screenGui

-- Title Bar
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, -30, 0, 40)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.fromRGB(255, 80, 255)
title.Text = "BIGNICKOZZZ SCRIPT"
title.Font = Enum.Font.GothamBlack
title.TextSize = 20
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = mainFrame

-- Close Button
local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0, 30, 0, 30)
closeBtn.Position = UDim2.new(1, -35, 0, 5)
closeBtn.Text = "X"
closeBtn.TextColor3 = Color3.new(1, 0, 0)
closeBtn.BackgroundColor3 = Color3.fromRGB(50, 0, 0)
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 14
createUICorner(closeBtn)
closeBtn.Parent = mainFrame

closeBtn.MouseButton1Click:Connect(function()
    screenGui.Enabled = false
end)

UserInputService.InputBegan:Connect(function(input, gpe)
    if not gpe and input.KeyCode == Enum.KeyCode.M then
        screenGui.Enabled = not screenGui.Enabled
    end
end)

-- Tab Buttons
local tabMain = createTabButton("Main", UDim2.new(0, 10, 0, 45))
tabMain.Parent = mainFrame
local tabPlayer = createTabButton("Player", UDim2.new(0, 100, 0, 45))
tabPlayer.Parent = mainFrame

local container = Instance.new("Frame")
container.Size = UDim2.new(1, -20, 1, -80)
container.Position = UDim2.new(0, 10, 0, 80)
container.BackgroundTransparency = 1
container.Parent = mainFrame

local function clearContainer()
    for _, c in pairs(container:GetChildren()) do
        c:Destroy()
    end
end

-- Tab: Main
local function loadMainTab()
    clearContainer()

    local skyButton = createTabButton("Sky: Disabled", UDim2.new(0, 0, 0, 0))
    skyButton.Size = UDim2.new(1, 0, 0, 40)
    skyButton.Parent = container

    local aimbotButton = createTabButton("Aimbot: Disabled", UDim2.new(0, 0, 0, 50))
    aimbotButton.Size = UDim2.new(1, 0, 0, 40)
    aimbotButton.Parent = container

    skyButton.MouseButton1Click:Connect(function()
        skyEnabled = not skyEnabled
        skyButton.Text = skyEnabled and "Sky: Enabled" or "Sky: Disabled"
    end)

    aimbotButton.MouseButton1Click:Connect(function()
        aimbotEnabled = not aimbotEnabled
        aimbotButton.Text = aimbotEnabled and "Aimbot: Enabled" or "Aimbot: Disabled"
    end)
end

-- Tab: Player Sliders
local walkSpeed = 16
local jumpPower = 50

local function loadPlayerTab()
    clearContainer()

    local speedSlider = createSlider("WalkSpeed", 8, 100, walkSpeed, function(val)
        walkSpeed = val
        hum.WalkSpeed = val
    end)
    speedSlider.Position = UDim2.new(0, 0, 0, 0)
    speedSlider.Parent = container

    local jumpSlider = createSlider("JumpPower", 30, 150, jumpPower, function(val)
        jumpPower = val
        hum.JumpPower = val
    end)
    jumpSlider.Position = UDim2.new(0, 0, 0, 70)
    jumpSlider.Parent = container

    local aimSlider = createSlider("Aimbot Range", 10, 100, aimbotDistance, function(val)
        aimbotDistance = val
    end)
    aimSlider.Position = UDim2.new(0, 0, 0, 140)
    aimSlider.Parent = container
end

tabMain.MouseButton1Click:Connect(loadMainTab)
tabPlayer.MouseButton1Click:Connect(loadPlayerTab)

loadMainTab()

-- Sky Bypass Logic
local function isValidSkyPosition(pos)
    local region = Region3.new(pos - Vector3.new(1, 1, 1), pos + Vector3.new(1, 1, 1))
    local parts = Workspace:FindPartsInRegion3(region, nil, math.huge)
    return #parts == 0
end

RunService.Heartbeat:Connect(function(dt)
    if skyEnabled and hum and hum.Health <= 25 then
        local hrp = chr:FindFirstChild("HumanoidRootPart")
        if hrp then
            local pos = hrp.Position
            local newPos = Vector3.new(pos.X + math.random(-1, 1), 10, pos.Z + math.random(-1, 1))
            if isValidSkyPosition(newPos) then
                chr:PivotTo(CFrame.new(newPos))
            end
        end
    end
end)

-- ESP Setup
local highlight = Instance.new("Highlight")
highlight.FillColor = Color3.fromRGB(160, 32, 240)
highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
highlight.Enabled = false
highlight.Parent = Workspace

-- Aimbot Helpers
local lastMousePosition = Vector2.new(mouse.X, mouse.Y)
local stillTime = 0

local function getClosestTargetInRange()
    local closest, minDist = nil, math.huge
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= lp and plr.Character and plr.Character:FindFirstChild("Head") then
            local head = plr.Character.Head
            local dist = (lp.Character.HumanoidRootPart.Position - head.Position).Magnitude
            if dist <= aimbotDistance then
                local screenPoint, onScreen = Workspace.CurrentCamera:WorldToViewportPoint(head.Position)
                if onScreen then
                    local mouseDist = (Vector2.new(mouse.X, mouse.Y) - Vector2.new(screenPoint.X, screenPoint.Y)).Magnitude
                    if mouseDist < minDist then
                        closest = plr.Character
                        minDist = mouseDist
                    end
                end
            end
        end
    end
    return closest
end

-- Aimbot Logic
RunService.RenderStepped:Connect(function(dt)
    if not aimbotEnabled then
        highlight.Enabled = false
        return
    end

    local currentMouse = Vector2.new(mouse.X, mouse.Y)
    if (currentMouse - lastMousePosition).Magnitude < mouseStillThreshold then
        stillTime += dt
    else
        stillTime = 0
    end
    lastMousePosition = currentMouse

    local target = getClosestTargetInRange()
    if target and (stillTime > 0.5 or (currentMouse - lastMousePosition).Magnitude < 50) then
        local head = target:FindFirstChild("Head")
        if head then
            Workspace.CurrentCamera.CFrame = CFrame.new(Workspace.CurrentCamera.CFrame.Position, head.Position)
            highlight.Adornee = target
            highlight.Enabled = true
        end
    else
        highlight.Enabled = false
    end
end)

-- Character Reset
lp.CharacterAdded:Connect(function(newChar)
    chr = newChar
    hum = chr:WaitForChild("Humanoid")
    hum.WalkSpeed = walkSpeed
    hum.JumpPower = jumpPower
end)
