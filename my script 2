--[[
    BIGNICKOZZZ SCRIPT - Enhanced Roblox Utility UI
    Features:
    - Sky Bypass Toggle
    - Dynamic Aimbot with ESP Circle (Locks on Closest Player's Head on RMB)
    - Jump Height and Walk Speed Sliders
    - Clean, Professional UI
--]]

-- Services
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")

local lp = Players.LocalPlayer
local chr = lp.Character or lp.CharacterAdded:Wait()
local hum = chr:WaitForChild("Humanoid")
local hrp = chr:WaitForChild("HumanoidRootPart")

-- Flags
local isSkyEnabled = false
local isAimbotEnabled = true
local isRunning = true

-- UI Setup
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "BIGNICKOZZZ_UI"
screenGui.ResetOnSpawn = false
screenGui.Enabled = true
screenGui.Parent = lp:WaitForChild("PlayerGui")

-- Main Frame
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 350, 0, 300)
frame.Position = UDim2.new(0.5, -175, 0.5, -150)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui

local uicorner = Instance.new("UICorner", frame)
uicorner.CornerRadius = UDim.new(0, 12)

-- Title
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 40)
title.BackgroundTransparency = 1
title.Text = "BIGNICKOZZZ SCRIPT"
title.Font = Enum.Font.FredokaOne
title.TextColor3 = Color3.fromRGB(200, 100, 255)
title.TextScaled = true
title.Parent = frame

-- Toggle Button
local skyToggle = Instance.new("TextButton")
skyToggle.Size = UDim2.new(0, 320, 0, 30)
skyToggle.Position = UDim2.new(0, 15, 0, 50)
skyToggle.BackgroundColor3 = Color3.fromRGB(100, 0, 170)
skyToggle.TextColor3 = Color3.fromRGB(255, 255, 255)
skyToggle.Font = Enum.Font.GothamBold
skyToggle.TextSize = 14
skyToggle.Text = "Sky: Disabled"
skyToggle.Parent = frame

skyToggle.MouseButton1Click:Connect(function()
    isSkyEnabled = not isSkyEnabled
    skyToggle.Text = isSkyEnabled and "Sky: Enabled" or "Sky: Disabled"
    skyToggle.BackgroundColor3 = isSkyEnabled and Color3.fromRGB(0, 170, 0) or Color3.fromRGB(100, 0, 170)
end)

-- Jump Height Slider
local jumpLabel = Instance.new("TextLabel")
jumpLabel.Text = "Jump Height"
jumpLabel.Position = UDim2.new(0, 15, 0, 90)
jumpLabel.Size = UDim2.new(0, 150, 0, 20)
jumpLabel.BackgroundTransparency = 1
jumpLabel.TextColor3 = Color3.new(1, 1, 1)
jumpLabel.Font = Enum.Font.Gotham
jumpLabel.TextSize = 14
jumpLabel.Parent = frame

local jumpSlider = Instance.new("TextBox")
jumpSlider.Size = UDim2.new(0, 60, 0, 20)
jumpSlider.Position = UDim2.new(0, 180, 0, 90)
jumpSlider.Text = "50"
jumpSlider.TextColor3 = Color3.new(1,1,1)
jumpSlider.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
jumpSlider.Font = Enum.Font.Gotham
jumpSlider.TextSize = 14
jumpSlider.ClearTextOnFocus = false
jumpSlider.Parent = frame

jumpSlider.FocusLost:Connect(function()
    local val = tonumber(jumpSlider.Text)
    if val then
        hum.UseJumpPower = true
        hum.JumpPower = val
    end
end)

-- Walk Speed Slider
local speedLabel = jumpLabel:Clone()
speedLabel.Text = "Walk Speed"
speedLabel.Position = UDim2.new(0, 15, 0, 120)
speedLabel.Parent = frame

local speedSlider = jumpSlider:Clone()
speedSlider.Position = UDim2.new(0, 180, 0, 120)
speedSlider.Text = "16"
speedSlider.Parent = frame

speedSlider.FocusLost:Connect(function()
    local val = tonumber(speedSlider.Text)
    if val then
        hum.WalkSpeed = val
    end
end)

-- Aimbot ESP Circle
local currentTarget = nil
local aimCircle = Drawing.new("Circle")
aimCircle.Color = Color3.fromRGB(200, 0, 255)
aimCircle.Thickness = 2
aimCircle.Radius = 6
aimCircle.Filled = true

-- Closest player finder
local function getClosestTarget()
    local closest = nil
    local shortest = math.huge
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= lp and plr.Character and plr.Character:FindFirstChild("Head") then
            local head = plr.Character.Head
            local screenPos, onScreen = Workspace.CurrentCamera:WorldToViewportPoint(head.Position)
            if onScreen then
                local dist = (Vector2.new(screenPos.X, screenPos.Y) - UserInputService:GetMouseLocation()).Magnitude
                if dist < shortest then
                    closest = plr
                    shortest = dist
                end
            end
        end
    end
    return closest
end

-- Aimbot Locking
UserInputService.InputBegan:Connect(function(input, gpe)
    if input.UserInputType == Enum.UserInputType.MouseButton2 and isAimbotEnabled then
        currentTarget = getClosestTarget()
    end
end)

RunService.RenderStepped:Connect(function()
    -- Aimbot Visual and Lock
    if currentTarget and currentTarget.Character and currentTarget.Character:FindFirstChild("Head") then
        local head = currentTarget.Character.Head
        local screenPos, visible = Workspace.CurrentCamera:WorldToViewportPoint(head.Position)
        aimCircle.Visible = true
        aimCircle.Position = Vector2.new(screenPos.X, screenPos.Y)
    else
        aimCircle.Visible = false
    end
end)

-- Sky Bypass Loop
RunService.Heartbeat:Connect(function()
    if isSkyEnabled and hum and hum.Health < 25 then
        local newPos = hrp.Position + Vector3.new(math.random(-1, 1), 10, math.random(-1, 1))
        chr:PivotTo(CFrame.new(newPos))
    end
end)

-- Character Reset Handler
lp.CharacterAdded:Connect(function(newChar)
    chr = newChar
    hum = chr:WaitForChild("Humanoid")
    hrp = chr:WaitForChild("HumanoidRootPart")
end)
